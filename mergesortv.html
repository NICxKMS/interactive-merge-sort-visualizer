<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Merge Sort Visualization</title>
    <link rel="stylesheet" href="css/mergesort.css">
</head>
<body>
	<div class="container">
		<h1>Advanced Merge Sort Visualization</h1>
		
		<div class="info-panel">
			<h3>Visual Guide</h3>
			<div class="legend">
				<div class="legend-item">
					<div class="legend-color legend-divide"></div>
					<span>Divide Phase</span>
				</div>
				<div class="legend-item">
					<div class="legend-color legend-merge"></div>
					<span>Merge Phase</span>
				</div>
				<div class="legend-item">
					<div class="legend-color legend-leaf"></div>
					<span>Leaf Node</span>
				</div>
			</div>
			<div class="controls-container">
				<div class="control-group speed-control">
					<label for="speed">Animation Speed:</label>
					<input type="range" id="speed" min="10" max="1000" value="300" step="10">
					<span id="speedValue">300ms</span>
				</div>
				<div class="control-group size-control">
					<label for="arraySize">Array Size:</label>
					<input type="number" id="arraySize" min="4" max="32" value="16" step="4">
					<button id="sizeUpdate">Update</button>
				</div>
			</div>
		</div>
		
		<div id="visualization"></div>
		
		<div class="control-panel">
			<button id="startSortBtn">Start Merge Sort</button>
			<button id="resetBtn">Reset</button>
			<button id="pauseResumeBtn">Pause</button>
		</div>
		
		<!-- Step-by-step log container -->
		<div id="stepsOutput"></div>
		
		<!-- Tree visualization containers -->
		<div class="tree-views-container">
			<!-- Divide tree view -->
			<div class="tree-view" id="divideTreeView">
				<div class="tree-view-header">
					<h3>Divide Phase Tree</h3>
				</div>
				<div class="tree-container" id="divideTreeContainer"></div>
				<div class="zoom-controls-wrapper">
					<div class="zoom-controls">
						<div class="zoom-btn" onclick="zoom('divide', 1.2)" title="Zoom in" aria-label="Zoom in">+</div>
						<div class="zoom-btn" onclick="zoom('divide', 0.8)" title="Zoom out" aria-label="Zoom out">−</div>
						<div class="zoom-btn" onclick="resetZoom('divide')" title="Reset zoom" aria-label="Reset zoom">⟲</div>
					</div>
				</div>
			</div>
			
			<!-- Merge tree view -->
			<div class="tree-view" id="mergeTreeView">
				<div class="tree-view-header">
					<h3>Merge Phase Tree</h3>
				</div>
				<div class="tree-container" id="mergeTreeContainer"></div>
				<div class="zoom-controls-wrapper">
					<div class="zoom-controls">
						<div class="zoom-btn" onclick="zoom('merge', 1.2)" title="Zoom in" aria-label="Zoom in">+</div>
						<div class="zoom-btn" onclick="zoom('merge', 0.8)" title="Zoom out" aria-label="Zoom out">−</div>
						<div class="zoom-btn" onclick="resetZoom('merge')" title="Reset zoom" aria-label="Reset zoom">⟲</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<!-- JavaScript files in the correct dependency order -->
	<script src="js/mergesort-init.js"></script>
	<script src="js/mergesort-core.js"></script>
	<script src="js/mergesort-visualization.js"></script>
	<script src="js/mergesort-bridge.js"></script>
	<script src="js/mergesort-algorithm.js"></script>
	
	<!-- Button click handlers -->
	<script>
		// Connect button onclick handlers after all scripts have loaded
		document.addEventListener('DOMContentLoaded', function() {
			// Connect button click events
			document.getElementById('startSortBtn').addEventListener('click', startSort);
			document.getElementById('resetBtn').addEventListener('click', resetVisualization);
			document.getElementById('pauseResumeBtn').addEventListener('click', togglePause);
		});
	</script>
</body>
</html>
